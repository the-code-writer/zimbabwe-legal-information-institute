{"version":3,"file":"plugin.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\r\nconst Badge = registerPlugin('Badge', {\r\n    web: () => import('./web').then(m => new m.BadgeWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { Badge };\r\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\r\nexport class BadgeWeb extends WebPlugin {\r\n    constructor() {\r\n        super();\r\n        this.restore();\r\n    }\r\n    async checkPermissions() {\r\n        return { display: 'granted' };\r\n    }\r\n    async requestPermissions() {\r\n        return { display: 'granted' };\r\n    }\r\n    async get() {\r\n        const value = localStorage.getItem(BadgeWeb.STORAGE_KEY);\r\n        const count = value ? parseInt(value, 10) : 0;\r\n        return { count };\r\n    }\r\n    async set(options) {\r\n        const count = options.count;\r\n        if (count === 0) {\r\n            await navigator.clearAppBadge();\r\n        }\r\n        else {\r\n            await navigator.setAppBadge(count);\r\n        }\r\n        const value = count.toString();\r\n        localStorage.setItem(BadgeWeb.STORAGE_KEY, value);\r\n    }\r\n    async increase() {\r\n        const { count } = await this.get();\r\n        await this.set({ count: count + 1 });\r\n    }\r\n    async decrease() {\r\n        const { count } = await this.get();\r\n        if (count < 1) {\r\n            return;\r\n        }\r\n        await this.set({ count: count - 1 });\r\n    }\r\n    async clear() {\r\n        await this.set({ count: 0 });\r\n    }\r\n    async isSupported() {\r\n        const result = {\r\n            isSupported: 'setAppBadge' in navigator,\r\n        };\r\n        return result;\r\n    }\r\n    async restore() {\r\n        const value = localStorage.getItem(BadgeWeb.STORAGE_KEY);\r\n        if (!value) {\r\n            return;\r\n        }\r\n        const count = parseInt(value, 10);\r\n        await navigator.setAppBadge(count);\r\n    }\r\n}\r\nBadgeWeb.STORAGE_KEY = 'capacitor.badge';\r\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}